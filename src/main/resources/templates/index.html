<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Employee Management System</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: "Poppins", sans-serif;
      background: linear-gradient(120deg, #6a11cb 0%, #2575fc 100%);
      color: #fff;
      display: flex;
      height: 100vh;
      overflow: hidden;
    }

    /* Sidebar */
    .sidebar {
      width: 250px;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(15px);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px 0;
      box-shadow: 3px 0 10px rgba(0, 0, 0, 0.3);
    }

    .sidebar h2 {
      font-size: 24px;
      margin: 0;
      color: #fff;
      text-shadow: 0 0 10px #00c6ff;
    }

    .menu {
      list-style: none;
      padding: 0;
      margin-top: 40px;
      width: 100%;
    }

    .menu li {
      padding: 15px 25px;
      margin: 8px 0;
      transition: 0.3s;
      cursor: pointer;
      text-align: left;
      font-weight: 500;
      font-size: 16px;
    }

    .menu li:hover,
    .menu li.active {
      background: linear-gradient(90deg, #00c6ff, #0072ff);
      box-shadow: 0 0 10px #00c6ff;
      color: #fff;
    }

    /* Main Content */
    .main {
      flex: 1;
      padding: 30px;
      overflow-y: auto;
    }

    header {
      text-align: center;
      font-size: 28px;
      font-weight: bold;
      margin-bottom: 25px;
      text-shadow: 0 0 15px #00c6ff;
    }

    .card {
      background: rgba(255, 255, 255, 0.15);
      border-radius: 15px;
      padding: 25px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
      animation: fadeIn 0.6s ease;
    }

    @keyframes fadeIn {
      from {opacity: 0; transform: translateY(10px);}
      to {opacity: 1; transform: translateY(0);}
    }

    .stats {
      display: flex;
      justify-content: space-around;
      margin-top: 30px;
      flex-wrap: wrap;
    }

    .stat-box {
      background: rgba(255, 255, 255, 0.25);
      border-radius: 12px;
      padding: 20px 30px;
      text-align: center;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
      margin: 10px;
    }

    .stat-box h2 {
      color: #fff;
      font-size: 28px;
      margin: 0;
    }

    .stat-box span {
      color: #fff;
      font-size: 16px;
      opacity: 0.8;
    }

    /* Employees Table */
    .form {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
      margin-bottom: 20px;
    }

    input {
      padding: 10px;
      border-radius: 8px;
      border: none;
      outline: none;
      width: 200px;
      background: rgba(255, 255, 255, 0.8);
    }

    button {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      background: linear-gradient(90deg, #00c6ff, #0072ff);
      color: white;
      font-weight: 600;
      cursor: pointer;
      transition: 0.3s;
    }

    button:hover {
      transform: scale(1.05);
      box-shadow: 0 0 10px #00c6ff;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      text-align: center;
      margin-top: 20px;
    }

    th, td {
      padding: 12px;
      background: rgba(255, 255, 255, 0.15);
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    }

    th {
      background: rgba(255, 255, 255, 0.25);
    }

    .edit-btn { background: #28a745; }
    .delete-btn { background: #ff4b5c; }

    /* Modal */
    .modal {
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.6);
      display: none;
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background: #fff;
      color: #000;
      padding: 20px;
      border-radius: 10px;
      width: 350px;
      text-align: center;
      box-shadow: 0 0 20px rgba(0,0,0,0.5);
    }

    .modal-content input {
      width: 90%;
      margin: 8px 0;
    }
  </style>
</head>
<body>
  <div class="sidebar">
    <h2>üåü EMS</h2>
    <ul class="menu">
      <li class="active" onclick="showSection('dashboard', this)">Dashboard</li>
      <li onclick="showSection('employees', this)">Employees</li>
      <li onclick="showSection('reports', this)">Reports</li>
      <li onclick="showSection('settings', this)">Settings</li>
    </ul>
  </div>

  <div class="main">
    <header id="pageTitle">Dashboard</header>

    <!-- Dashboard -->
    <div class="card section" id="dashboardSection">
      <h3>Welcome to Employee Management Dashboard üëã</h3>
      <p>Manage your employees, check reports, and customize preferences easily.</p>

      <div class="stats">
        <div class="stat-box"><h2 id="empCount">0</h2><span>Total Employees</span></div>
        <div class="stat-box"><h2 id="totalSalary">‚Çπ0</h2><span>Total Salary Paid</span></div>
        <div class="stat-box"><h2 id="deptCount">0</h2><span>Departments</span></div>
      </div>
    </div>

    <!-- Employees -->
    <div class="card section" id="employeesSection" style="display:none;">
      <div class="form">
        <input type="text" id="name" placeholder="Name" />
        <input type="email" id="email" placeholder="Email" />
        <input type="text" id="department" placeholder="Department" />
        <input type="number" id="salary" placeholder="Salary" />
        <button onclick="addEmployee()">Add Employee</button>
      </div>
      <table>
        <thead>
          <tr><th>ID</th><th>Name</th><th>Email</th><th>Department</th><th>Salary</th><th>Actions</th></tr>
        </thead>
        <tbody id="employeeTable"></tbody>
      </table>
    </div>

    <!-- Reports -->
    <div class="card section" id="reportsSection" style="display:none;">
      <h3>Reports üìä</h3>
      <p>Employee data summary by department:</p>
      <table>
        <thead><tr><th>Department</th><th>Employees</th><th>Total Salary</th></tr></thead>
        <tbody id="reportTable"></tbody>
      </table>
    </div>

    <!-- Settings -->
   
<div class="card section" id="settingsSection" style="display:none;">
  <h3>‚öôÔ∏è Settings</h3>
  <p>Customize your dashboard appearance and preferences here.</p>

  <h4 style="margin-top:20px;">üé® Choose a Theme</h4>
  <div id="themes" style="margin-top:8px;">
    <div class="theme-option" data-primary="#6a11cb" data-secondary="#2575fc"
         title="Blue" aria-label="Blue theme"></div>

    <div class="theme-option" data-primary="#ff512f" data-secondary="#dd2476"
         title="Pink" aria-label="Pink theme"></div>

    <div class="theme-option" data-primary="#11998e" data-secondary="#38ef7d"
         title="Green" aria-label="Green theme"></div>

    <div class="theme-option" data-primary="#f7971e" data-secondary="#ffd200"
         title="Yellow" aria-label="Yellow theme"></div>
  </div>

  <div style="margin-top:16px;">
    <small>Preferences are saved locally.</small>
  </div>
</div>

<!-- Toast -->
<div id="settingsToast" style="position:fixed;right:20px;bottom:20px;display:none;
     background:rgba(0,0,0,0.75);color:#fff;padding:10px 14px;border-radius:8px;z-index:9999;"></div>

<!-- SETTINGS STYLES -->
<style>
  :root{
    --primary: #6a11cb;
    --secondary: #2575fc;
    --card-bg: rgba(255,255,255,0.15);
    --text-color: #ffffff;
  }

  /* Example usage for your page (you can expand this) */
  body {
    background: linear-gradient(120deg, var(--primary) 0%, var(--secondary) 100%);
    color: var(--text-color);
  }

  .btn{
    padding:10px 14px;border-radius:8px;border:none;
    background:linear-gradient(90deg,var(--primary),var(--secondary));
    color:#fff;cursor:pointer;font-weight:600;
  }
  .btn:active{transform:scale(0.99);}

  .theme-option {
    display:inline-block;width:60px;height:60px;border-radius:8px;margin:8px;cursor:pointer;
    border:3px solid rgba(255,255,255,0.12);box-shadow:0 6px 18px rgba(0,0,0,0.25);
    transition: transform .15s, border-color .15s;
  }
  .theme-option:hover{ transform:translateY(-6px); border-color:rgba(255,255,255,0.85); }

  /* set background for options via inline style from JS */
  .theme-option[data-primary][data-secondary]{
    /* fallback look if JS doesn't set inline gradient */
    background: linear-gradient(120deg, #6a11cb, #2575fc);
  }

  /* Dark mode: invert card / text behavior - adjust as you like */
  body.dark {
    --card-bg: rgba(0,0,0,0.45);
    --text-color: #f0f6ff;
    filter: none;
  }

  /* ensure clickable when section is visible */
  #settingsSection { pointer-events: auto; }

</style>

<!-- SETTINGS SCRIPT -->
<script>
  (function(){
    const toast = id => {
      const t = document.getElementById('settingsToast');
      t.innerText = id;
      t.style.display = 'block';
      setTimeout(()=> t.style.display='none', 1800);
    };

    function toggleMode() {
      document.body.classList.toggle('dark');
      const mode = document.body.classList.contains('dark') ? 'dark' : 'light';
      localStorage.setItem('ems_themeMode', mode);
      toast(mode === 'dark' ? 'Dark mode enabled' : 'Light mode enabled');
    }

    function setTheme(primary, secondary) {
      // set CSS variables
      document.documentElement.style.setProperty('--primary', primary);
      document.documentElement.style.setProperty('--secondary', secondary);
      localStorage.setItem('ems_themeColors', JSON.stringify({primary, secondary}));
      toast('Theme applied');
    }

    // Attach listeners after DOM is ready
    document.addEventListener('DOMContentLoaded', () => {
      // Ensure the toggle button exists
      const btn = document.getElementById('toggleModeBtn');
      if(btn){
        btn.addEventListener('click', () => {
          try { toggleMode(); }
          catch(e) { console.error('toggleMode error', e); }
        });
      } else {
        console.warn('toggleModeBtn not found in DOM');
      }

      // Attach theme-option listeners and set their gradient backgrounds
      document.querySelectorAll('.theme-option').forEach(el => {
        const p = el.dataset.primary;
        const s = el.dataset.secondary;
        if(p && s){
          el.style.background = `linear-gradient(120deg, ${p}, ${s})`;
        }
        el.addEventListener('click', () => {
          try { setTheme(p, s); }
          catch(e){ console.error('setTheme error', e); }
        });
      });

      // Load saved preferences
      const savedMode = localStorage.getItem('ems_themeMode');
      if(savedMode === 'dark') document.body.classList.add('dark');

      const savedColors = localStorage.getItem('ems_themeColors');
      if(savedColors){
        try{
          const {primary, secondary} = JSON.parse(savedColors);
          if(primary && secondary) {
            document.documentElement.style.setProperty('--primary', primary);
            document.documentElement.style.setProperty('--secondary', secondary);
          }
        } catch(e){ console.warn('invalid saved themeColors', e); }
      }
    });

    // Expose functions for debugging in case inline buttons exist elsewhere
    window.emsToggleMode = toggleMode;
    window.emsSetTheme = setTheme;
  })();
</script>

  <!-- Modal -->
  <div class="modal" id="editModal">
    <div class="modal-content">
      <h3>Edit Employee</h3>
      <input type="hidden" id="editId">
      <input type="text" id="editName" placeholder="Name">
      <input type="email" id="editEmail" placeholder="Email">
      <input type="text" id="editDepartment" placeholder="Department">
      <input type="number" id="editSalary" placeholder="Salary">
      <div style="margin-top:10px;">
        <button onclick="updateEmployee()">Save</button>
        <button style="background:#ff4b5c" onclick="closeModal()">Cancel</button>
      </div>
    </div>
  </div>

  <script>
    const api = "http://localhost:9090/api/employees";
    const modal = document.getElementById("editModal");
    let employees = [];

    function showSection(sectionId, el) {
      document.querySelectorAll('.section').forEach(s => s.style.display = 'none');
      document.getElementById(sectionId + 'Section').style.display = 'block';
      document.getElementById('pageTitle').innerText = sectionId.charAt(0).toUpperCase() + sectionId.slice(1);
      document.querySelectorAll('.menu li').forEach(li => li.classList.remove('active'));
      el.classList.add('active');
      if (sectionId === 'employees' || sectionId === 'dashboard' || sectionId === 'reports') loadEmployees();
    }

    async function loadEmployees() {
      const res = await fetch(api);
      employees = await res.json();

      // Update dashboard
      document.getElementById("empCount").innerText = employees.length;
      const totalSalary = employees.reduce((sum, e) => sum + e.salary, 0);
      document.getElementById("totalSalary").innerText = "‚Çπ" + totalSalary.toLocaleString();
      const deptSet = new Set(employees.map(e => e.department));
      document.getElementById("deptCount").innerText = deptSet.size;

      // Update employees table
      const table = document.getElementById("employeeTable");
      table.innerHTML = "";
      employees.forEach(emp => {
        table.innerHTML += `
          <tr>
            <td>${emp.id}</td><td>${emp.name}</td><td>${emp.email}</td>
            <td>${emp.department}</td><td>${emp.salary}</td>
            <td>
              <button class="edit-btn" onclick="openModal(${emp.id}, '${emp.name}', '${emp.email}', '${emp.department}', ${emp.salary})">Edit</button>
              <button class="delete-btn" onclick="deleteEmployee(${emp.id})">Delete</button>
            </td>
          </tr>`;
      });

      // Update reports table
      const report = {};
      employees.forEach(e => {
        if (!report[e.department]) report[e.department] = { count: 0, total: 0 };
        report[e.department].count++;
        report[e.department].total += e.salary;
      });
      const reportTable = document.getElementById("reportTable");
      reportTable.innerHTML = Object.entries(report).map(([dept, val]) => `
        <tr><td>${dept}</td><td>${val.count}</td><td>‚Çπ${val.total}</td></tr>
      `).join('');
    }

    async function addEmployee() {
      const employee = {
        name: name.value, email: email.value,
        department: department.value, salary: salary.value
      };
      await fetch(api, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(employee)
      });
      name.value = email.value = department.value = salary.value = "";
      loadEmployees();
    }

    async function deleteEmployee(id) {
      if (confirm("Are you sure you want to delete this employee?")) {
        await fetch(`${api}/${id}`, { method: "DELETE" });
        loadEmployees();
      }
    }

    function openModal(id, name, email, dept, salary) {
      modal.style.display = "flex";
      editId.value = id;
      editName.value = name;
      editEmail.value = email;
      editDepartment.value = dept;
      editSalary.value = salary;
    }

    function closeModal() { modal.style.display = "none"; }

    async function updateEmployee() {
      const id = editId.value;
      const updated = {
        name: editName.value,
        email: editEmail.value,
        department: editDepartment.value,
        salary: parseFloat(editSalary.value)
      };
      await fetch(`${api}/${id}`, {
        method: "PUT",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(updated)
      });
      closeModal();
      loadEmployees();
    }

    loadEmployees();
  </script>
    <footer>¬© 2025 Employee Management System | Designed with ‚ù§Ô∏è by Shivraj Gunte</footer>

  
</body>
</html>
